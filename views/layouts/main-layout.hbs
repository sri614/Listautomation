<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{title}}</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header>
    <div class="container">
      <div class="logo">BO Emailer</div>
      <nav class="navbar">
        <a class="{{isActive activePage 'docs'}}" href="/">Docs</a>
        <a class="{{isActive activePage 'create list'}}"  href="/">Create lists</a>
        <a class="{{isActive activePage 'email cloning'}}" href="/api/cloner">Email Cloning</a>
        <a class="{{isActive activePage 'report'}}" href="/report">Report</a>
      </nav>
    </div>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="main dashboard">
    {{{body}}}
  </main>

  <!-- ===== FOOTER ===== -->
  <footer>
    &copy; 2025 BO Emailer. All rights reserved.
  </footer>

  <!-- ===== MODAL FUNCTIONALITY ===== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById("emailModal");
      const openBtn = document.getElementById("openFormBtn");
      const closeBtn = document.getElementById("closeModal");

      if (openBtn && modal && closeBtn) {
        openBtn.onclick = () => modal.style.display = "block";
        closeBtn.onclick = () => modal.style.display = "none";
        window.onclick = e => {
          if (e.target === modal) modal.style.display = "none";
        };
      }



          // Format display dates
    document.querySelectorAll(".js-date").forEach(el => {
      const date = new Date(el.dataset.iso);
      el.textContent = date.toLocaleDateString("en-GB", {
        day: "numeric", month: "short", year: "numeric"
      });
    });

//list date format
document.querySelectorAll(".list-date-span").forEach(el => {
  const iso = el.getAttribute("data-iso"); // get original ISO date from data-attr
  if (!iso) return; // skip if no ISO available

  const d = new Date(iso);
  const day = d.getDate();
  const month = d.toLocaleString('en-US', { month: 'short' });
  const year = d.getFullYear();

  let hours = d.getHours();
  const minutes = d.getMinutes().toString().padStart(2, '0');
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12 || 12;

  el.textContent = `${day} ${month} ${year} ${hours}:${minutes}${ampm}`;
});


  // Format created/updated timestamp
    document.querySelectorAll(".edit-date").forEach(el => {
      const date = new Date(el.dataset.date);
      const day = String(date.getDate()).padStart(2, '0');
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const year = String(date.getFullYear()).slice(-2);
      let hours = date.getHours();
      const minutes = String(date.getMinutes()).padStart(2, '0');
      const ampm = hours >= 12 ? 'pm' : 'am';
      hours = hours % 12 || 12;
      el.textContent = `${day}.${month}.${year} ${hours}.${minutes} ${ampm}`;
    });


     // Short campaign name
    document.querySelectorAll(".campaign").forEach(el => {
      el.textContent = `${el.textContent.slice(0,18)}`;
    });


    

    });
  </script>

</body>
</html>